"use strict";(self.webpackChunkhcihub_docs=self.webpackChunkhcihub_docs||[]).push([[3587],{4594:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>o,frontMatter:()=>d,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"datasets/invasive/Visual Neuropixel","title":"9_Visual Neuropixel","description":"\u6570\u636e\u6765\u6e90\uff1aAllen Brain Observatory \u2014 Visual Coding Neuropixels \u6570\u636e\u96c6\uff08NWB\uff0c\u901a\u8fc7 AllenSDK \u4e0b\u8f7d\uff09\u3002\u8be5\u6570\u636e\u96c6\u5305\u542b 58 \u4e2a\u5b9e\u9a8c\u3001\u6bcf\u6b21\u5b9e\u9a8c\u6700\u591a 6 \u6839 Neuropixels \u63a2\u9488\uff0c\u8986\u76d6\u76ae\u5c42\u3001\u4e18\u8111\u3001\u6d77\u9a6c\u7b49\u533a\u57df\uff1b\u7528\u4e8e\u7cfb\u7edf\u6027\u7814\u7a76\u5c0f\u9f20\u89c6\u89c9\u7cfb\u7edf\u5728\u88ab\u52a8\u523a\u6fc0\u6761\u4ef6\u4e0b\u7684\u653e\u7535\u6d3b\u52a8\u3002\u672c\u6d41\u7a0b\u4ee5 drifting gratings\uff088 \u4e2a\u65b9\u5411\uff09\u523a\u6fc0\u4e3a\u4f8b\uff0c\u6f14\u793a\u5b8c\u6574\u7684\u4f1a\u8bdd\u7b5b\u9009\u3001\u5355\u5143\u9009\u62e9\u3001\u8109\u51b2\u77e9\u9635\u6784\u5efa\u3001\u65f6\u95f4 binning\u3001\u4e0e\u6570\u636e\u4fdd\u5b58\u3002\u5173\u4e8e drifting gratings \u7684 8 \u4e2a\u65b9\u5411\u4e0e\u9891\u7387\u8bbe\u7f6e\u53ef\u53c2\u8003\u5b98\u65b9\u8bf4\u660e\u3002","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/datasets/invasive/9_Visual Neuropixel.md","sourceDirName":"datasets/invasive","slug":"/datasets/invasive/Visual Neuropixel","permalink":"/BCIJelly-site/zh/docs/next/datasets/invasive/Visual Neuropixel","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/datasets/invasive/9_Visual Neuropixel.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"8_Reaching MC PMC","permalink":"/BCIJelly-site/zh/docs/next/datasets/invasive/Reaching MC PMC"},"next":{"title":"10_Visual Grating Task","permalink":"/BCIJelly-site/zh/docs/next/datasets/invasive/Visual Grating Task"}}');var l=i(4848),r=i(8453);const d={},c="9_Visual Neuropixel",t={},h=[{value:"1. \u73af\u5883\u4f9d\u8d56",id:"1-\u73af\u5883\u4f9d\u8d56",level:2},{value:"2. \u76ee\u5f55\u7ed3\u6784\u4e0e\u7f13\u5b58",id:"2-\u76ee\u5f55\u7ed3\u6784\u4e0e\u7f13\u5b58",level:2},{value:"3. \u5904\u7406\u76ee\u6807\u4e0e\u6570\u636e\u683c\u5f0f",id:"3-\u5904\u7406\u76ee\u6807\u4e0e\u6570\u636e\u683c\u5f0f",level:2},{value:"4. \u5173\u952e\u53c2\u6570",id:"4-\u5173\u952e\u53c2\u6570",level:2},{value:"5. \u6570\u636e\u5904\u7406\u6d41\u7a0b\uff08Step-by-Step\uff09",id:"5-\u6570\u636e\u5904\u7406\u6d41\u7a0bstep-by-step",level:2},{value:"Step 0\uff1a\u521d\u59cb\u5316\u4e0e\u4f1a\u8bdd\u8868",id:"step-0\u521d\u59cb\u5316\u4e0e\u4f1a\u8bdd\u8868",level:3},{value:"Step 1\uff1a\u7b5b\u9009\u5305\u542b <code>drifting_gratings</code> \u7684\u4f1a\u8bdd",id:"step-1\u7b5b\u9009\u5305\u542b-drifting_gratings-\u7684\u4f1a\u8bdd",level:3},{value:"Step 2\uff1a\u7b5b\u9009\u76ee\u6807\u8111\u533a\u4e0e\u9ad8\u8d28\u91cf\u5355\u4f4d",id:"step-2\u7b5b\u9009\u76ee\u6807\u8111\u533a\u4e0e\u9ad8\u8d28\u91cf\u5355\u4f4d",level:3},{value:"Step 3\uff1a\u6784\u5efa trial \u7ea7\u539f\u59cb\u8109\u51b2\u77e9\u9635\uff080/1\uff09",id:"step-3\u6784\u5efa-trial-\u7ea7\u539f\u59cb\u8109\u51b2\u77e9\u963501",level:3},{value:"Step 4\uff1a\u65f6\u95f4 Binning\uff08\u7edf\u4e00\u65f6\u957f\u5230\u56fa\u5b9a\u6b65\u6570\uff09",id:"step-4\u65f6\u95f4-binning\u7edf\u4e00\u65f6\u957f\u5230\u56fa\u5b9a\u6b65\u6570",level:3},{value:"Step 5\uff1a\u6253\u5305\u4e0e\u4fdd\u5b58",id:"step-5\u6253\u5305\u4e0e\u4fdd\u5b58",level:3},{value:"6. \u8fd0\u884c\u65b9\u5f0f",id:"6-\u8fd0\u884c\u65b9\u5f0f",level:2},{value:"7. \u8f93\u51fa\u6570\u636e\u8bf4\u660e",id:"7-\u8f93\u51fa\u6570\u636e\u8bf4\u660e",level:2},{value:"8. \u5e38\u89c1\u95ee\u9898\u4e0e\u5efa\u8bae",id:"8-\u5e38\u89c1\u95ee\u9898\u4e0e\u5efa\u8bae",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"9_visual-neuropixel",children:"9_Visual Neuropixel"})}),"\n",(0,l.jsx)(n.h1,{id:"\u6570\u636e\u5904\u7406\u6d41\u7a0b",children:"\u6570\u636e\u5904\u7406\u6d41\u7a0b"}),"\n",(0,l.jsx)(n.p,{children:"**\u6570\u636e\u6765\u6e90\uff1a**Allen Brain Observatory \u2014 Visual Coding Neuropixels \u6570\u636e\u96c6\uff08NWB\uff0c\u901a\u8fc7 AllenSDK \u4e0b\u8f7d\uff09\u3002\u8be5\u6570\u636e\u96c6\u5305\u542b 58 \u4e2a\u5b9e\u9a8c\u3001\u6bcf\u6b21\u5b9e\u9a8c\u6700\u591a 6 \u6839 Neuropixels \u63a2\u9488\uff0c\u8986\u76d6\u76ae\u5c42\u3001\u4e18\u8111\u3001\u6d77\u9a6c\u7b49\u533a\u57df\uff1b\u7528\u4e8e\u7cfb\u7edf\u6027\u7814\u7a76\u5c0f\u9f20\u89c6\u89c9\u7cfb\u7edf\u5728\u88ab\u52a8\u523a\u6fc0\u6761\u4ef6\u4e0b\u7684\u653e\u7535\u6d3b\u52a8\u3002\u672c\u6d41\u7a0b\u4ee5 drifting gratings\uff088 \u4e2a\u65b9\u5411\uff09\u523a\u6fc0\u4e3a\u4f8b\uff0c\u6f14\u793a\u5b8c\u6574\u7684\u4f1a\u8bdd\u7b5b\u9009\u3001\u5355\u5143\u9009\u62e9\u3001\u8109\u51b2\u77e9\u9635\u6784\u5efa\u3001\u65f6\u95f4 binning\u3001\u4e0e\u6570\u636e\u4fdd\u5b58\u3002\u5173\u4e8e drifting gratings \u7684 8 \u4e2a\u65b9\u5411\u4e0e\u9891\u7387\u8bbe\u7f6e\u53ef\u53c2\u8003\u5b98\u65b9\u8bf4\u660e\u3002"}),"\n",(0,l.jsxs)(n.p,{children:["\u539f\u59cb\u6570\u636e\u94fe\u63a5\uff1a",(0,l.jsx)(n.a,{href:"https://portal.brain-map.org/circuits-behavior/visual-coding-neuropixels",children:"https://portal.brain-map.org/circuits-behavior/visual-coding-neuropixels"})]}),"\n",(0,l.jsx)(n.h2,{id:"1-\u73af\u5883\u4f9d\u8d56",children:"1. \u73af\u5883\u4f9d\u8d56"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Python \u2265 3.8"}),"\n",(0,l.jsx)(n.li,{children:"AllenSDK"}),"\n",(0,l.jsx)(n.li,{children:"NumPy\u3001tqdm\u3001pickle"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"pip install allensdk numpy tqdm\n"})}),"\n",(0,l.jsx)(n.h2,{id:"2-\u76ee\u5f55\u7ed3\u6784\u4e0e\u7f13\u5b58",children:"2. \u76ee\u5f55\u7ed3\u6784\u4e0e\u7f13\u5b58"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u672c\u6d41\u7a0b\u9ed8\u8ba4\u4f7f\u7528\u672c\u5730\u7f13\u5b58\u76ee\u5f55 ",(0,l.jsx)(n.code,{children:"./allen_vc_npx"}),"\uff0cAllenSDK \u4f1a\u5728\u5176\u4e2d\u521b\u5efa\u5e76\u7ef4\u62a4 ",(0,l.jsx)(n.code,{children:"manifest.json"})," \u4e0e\u5df2\u4e0b\u8f7d\u7684\u4f1a\u8bdd/\u5355\u4f4d\u6570\u636e"]}),"\n",(0,l.jsxs)(n.li,{children:["\u4f60\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e ",(0,l.jsx)(n.code,{children:"cache_dir"})," \u81ea\u5b9a\u4e49\u5b58\u50a8\u4f4d\u7f6e\uff08\u89c1\u4e0b\u6587\u53c2\u6570\u533a\uff09"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"3-\u5904\u7406\u76ee\u6807\u4e0e\u6570\u636e\u683c\u5f0f",children:"3. \u5904\u7406\u76ee\u6807\u4e0e\u6570\u636e\u683c\u5f0f"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u76ee\u6807"}),"\uff1a\u4ece Visual Coding \u2013 Neuropixels \u9879\u76ee\u4e2d\u9009\u53d6\u5305\u542b ",(0,l.jsx)(n.code,{children:"drifting_gratings"})," \u7684\u4f1a\u8bdd\uff08session\uff09\uff0c\u5728\u6307\u5b9a\u8111\u533a\uff08\u5982 ",(0,l.jsx)(n.code,{children:"VISp"}),"\uff09\u5185\u7b5b\u9009\u6ee1\u8db3 SNR \u9608\u503c\u7684\u5355\u4f4d\uff08units\uff09\uff0c\u5bf9\u6bcf\u4e2a trial \u6784\u5efa\u539f\u59cb 0/1 \u8109\u51b2\u65f6\u95f4\u77e9\u9635\uff0c\u5e76\u8fdb\u884c\u65f6\u95f4 binning\uff08\u7edf\u4e00\u4e3a\u56fa\u5b9a\u7684\u65f6\u95f4\u6b65\u957f\u6570\uff09\uff0c\u6700\u7ec8\u4fdd\u5b58\u4e3a ",(0,l.jsx)(n.code,{children:".npy"}),"\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"spike"}),": ",(0,l.jsx)(n.code,{children:"(num_trials, time_bins, num_units)"})," \u7684\u6574\u578b\u8ba1\u6570\u77e9\u9635"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"label"}),": ",(0,l.jsx)(n.code,{children:"(num_trials,)"}),"\uff0c\u4e3a 8 \u4e2a\u65b9\u5411\uff080\u2013315\xb0\uff0c\u6b65\u957f 45\xb0\uff09\u7684\u7c7b\u522b\u6807\u7b7e"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"4-\u5173\u952e\u53c2\u6570",children:"4. \u5173\u952e\u53c2\u6570"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:'cache_dir = "./allen_vc_npx"'}),"\uff1aAllenSDK \u7f13\u5b58\u76ee\u5f55"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"sampling_rate = 30000"}),"\uff1aNeuropixels \u539f\u59cb\u91c7\u6837\u7387\uff08Hz\uff09`"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"snr_thresh = 2.0"}),"\uff1a\u5355\u4f4d\u7b5b\u9009\u7684\u4fe1\u566a\u6bd4\u9608\u503c"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:'target_area = "VISp"'}),"\uff1a\u76ee\u6807\u8111\u533a\uff08\u4f8b\u5982 ",(0,l.jsx)(n.code,{children:"VISp"}),"\uff09`"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"expect_num_bins = 50"}),"\uff1a\u5bf9\u6bcf\u4e2a trial \u7684\u65f6\u95f4\u7ef4\u7edf\u4e00\u5230 50 \u4e2a bin\uff08\u5206\u7c7b\u4efb\u52a1\u5e38\u7528\uff09"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"5-\u6570\u636e\u5904\u7406\u6d41\u7a0bstep-by-step",children:"5. \u6570\u636e\u5904\u7406\u6d41\u7a0b\uff08Step-by-Step\uff09"}),"\n",(0,l.jsx)(n.h3,{id:"step-0\u521d\u59cb\u5316\u4e0e\u4f1a\u8bdd\u8868",children:"Step 0\uff1a\u521d\u59cb\u5316\u4e0e\u4f1a\u8bdd\u8868"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\u521b\u5efa/\u786e\u8ba4\u7f13\u5b58\u76ee\u5f55\u4e0e ",(0,l.jsx)(n.code,{children:"manifest.json"}),"\uff1b"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"EcephysProjectCache.from_warehouse(manifest=...)"})," \u83b7\u53d6\u5de5\u7a0b\u7f13\u5b58\u5bf9\u8c61\uff1b"]}),"\n",(0,l.jsxs)(n.li,{children:["\u8bfb\u53d6\u4f1a\u8bdd\u8868 ",(0,l.jsx)(n.code,{children:"cache.get_session_table()"})," \u5e76\u904d\u5386\u4f1a\u8bdd ID\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["AllenSDK \u7684 ",(0,l.jsx)(n.code,{children:"EcephysProjectCache"})," \u4f1a\u81ea\u52a8\u7ba1\u7406\u4e0b\u8f7d\u4e0e\u672c\u5730\u7f13\u5b58\uff0c\u662f\u8bbf\u95ee\u8be5\u6570\u636e\u96c6\u7684\u63a8\u8350\u5165\u53e3\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"step-1\u7b5b\u9009\u5305\u542b-drifting_gratings-\u7684\u4f1a\u8bdd",children:["Step 1\uff1a\u7b5b\u9009\u5305\u542b ",(0,l.jsx)(n.code,{children:"drifting_gratings"})," \u7684\u4f1a\u8bdd"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5c06 ",(0,l.jsx)(n.code,{children:"session.stimulus_presentations"})," \u590d\u5236\u4e00\u4efd\u5e76\u6e05\u7406 ",(0,l.jsx)(n.code,{children:"orientation"})," \u5b57\u6bb5\uff08\u5c06 ",(0,l.jsx)(n.code,{children:'"null"'})," \u7f6e\u4e3a NaN\uff09\uff1b"]}),"\n",(0,l.jsxs)(n.li,{children:["\u4ec5\u4fdd\u7559 ",(0,l.jsx)(n.code,{children:'stimulus_name == "drifting_gratings"'})," \u7684\u884c\uff0c\u5e76\u53bb\u9664 ",(0,l.jsx)(n.code,{children:"orientation"})," \u4e3a\u7a7a\u7684\u6761\u76ee\uff1b"]}),"\n",(0,l.jsxs)(n.li,{children:["\u53ea\u53d6 8 \u4e2a\u6709\u6548\u65b9\u5411 ",(0,l.jsx)(n.code,{children:"{0,45,90,135,180,225,270,315}"}),"\uff0c\u5e76\u5c06\u6bcf\u4e2a\u65b9\u5411\u6620\u5c04\u4e3a\u5206\u7c7b\u6807\u7b7e ",(0,l.jsx)(n.code,{children:"0..7"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["\u5b98\u65b9\u8d44\u6599\u786e\u8ba4 ",(0,l.jsx)(n.em,{children:"drifting gratings"})," \u91c7\u7528 8 \u4e2a\u65b9\u5411\uff0845\xb0 \u95f4\u9694\uff09\u3002\u6709\u65f6\u8868\u4e2d\u53c2\u6570\u4e3a ",(0,l.jsx)(n.code,{children:"null"})," \u8868\u793a\u7a7a\u5c4f\uff08\u7070\u5c4f\uff09\uff0c\u6ce8\u610f\u5728\u6e05\u6d17\u65f6\u5254\u9664\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-2\u7b5b\u9009\u76ee\u6807\u8111\u533a\u4e0e\u9ad8\u8d28\u91cf\u5355\u4f4d",children:"Step 2\uff1a\u7b5b\u9009\u76ee\u6807\u8111\u533a\u4e0e\u9ad8\u8d28\u91cf\u5355\u4f4d"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u4ece ",(0,l.jsx)(n.code,{children:"session.units"})," \u4e2d\u9009\u62e9 ",(0,l.jsx)(n.code,{children:"structure_acronym == target_area"})," \u4e14 ",(0,l.jsx)(n.code,{children:"snr >= snr_thresh"})," \u7684\u5355\u4f4d\u96c6\u5408\uff1b"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-3\u6784\u5efa-trial-\u7ea7\u539f\u59cb\u8109\u51b2\u77e9\u963501",children:"Step 3\uff1a\u6784\u5efa trial \u7ea7\u539f\u59cb\u8109\u51b2\u77e9\u9635\uff080/1\uff09"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5bf9\u6bcf\u4e2a drifting gratings trial\uff1a\u4ece ",(0,l.jsx)(n.code,{children:"start_time"})," \u5230 ",(0,l.jsx)(n.code,{children:"stop_time"})," \u8ba1\u7b97 trial \u6301\u7eed\u65f6\u957f\u5e76\u6362\u7b97\u4e3a\u91c7\u6837\u70b9\u6570\uff08\u6309 30 kHz \u4e0a\u53d6\u6574\uff09\uff1b"]}),"\n",(0,l.jsxs)(n.li,{children:["\u4e3a\u8be5 trial \u521d\u59cb\u5316\u5f62\u72b6\u4e3a ",(0,l.jsx)(n.code,{children:"(num_units_selected, num_samples)"})," \u7684 0/1 \u77e9\u9635\uff1b"]}),"\n",(0,l.jsxs)(n.li,{children:["\u904d\u5386\u6bcf\u4e2a\u5355\u4f4d\u7684 ",(0,l.jsx)(n.code,{children:"spike_times[unit_id]"}),"\uff0c\u63d0\u53d6\u843d\u5728 ",(0,l.jsx)(n.code,{children:"[start_time, stop_time)"})," \u7684\u76f8\u5bf9\u65f6\u95f4\uff0c\u5e76\u4e58\u4ee5\u91c7\u6837\u7387\u53d6\u6574\u4e3a\u7d22\u5f15\uff0c\u5c06\u5bf9\u5e94\u4f4d\u7f6e\u7f6e\u4e3a 1\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-4\u65f6\u95f4-binning\u7edf\u4e00\u65f6\u957f\u5230\u56fa\u5b9a\u6b65\u6570",children:"Step 4\uff1a\u65f6\u95f4 Binning\uff08\u7edf\u4e00\u65f6\u957f\u5230\u56fa\u5b9a\u6b65\u6570\uff09"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u4f60\u7684 ",(0,l.jsx)(n.code,{children:"bin_spikes_for_classify(data, expect_num_bins=50)"})," \u4f1a\uff1a","\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\u63a5\u6536\u5f62\u5982 ",(0,l.jsx)(n.code,{children:"[channels, time_steps]"})," \u7684\u8109\u51b2\u77e9\u9635\uff1b"]}),"\n",(0,l.jsxs)(n.li,{children:["\u6839\u636e ",(0,l.jsx)(n.code,{children:"expect_num_bins"})," \u81ea\u52a8\u8ba1\u7b97 ",(0,l.jsx)(n.code,{children:"bin_size = ceil(time_steps/expect_num_bins)"}),"\uff1b"]}),"\n",(0,l.jsxs)(n.li,{children:["\u82e5\u957f\u5ea6\u4e0d\u8db3\u5219\u4ee5 0 \u586b\u5145\u5230 ",(0,l.jsx)(n.code,{children:"bin_size * expect_num_bins"}),"\uff1b"]}),"\n",(0,l.jsxs)(n.li,{children:["\u91cd\u5851\u4e3a ",(0,l.jsx)(n.code,{children:"[channels, expect_num_bins, bin_size]"})," \u5e76\u5728\u6700\u540e\u4e00\u7ef4\u6c42\u548c\uff1b"]}),"\n",(0,l.jsxs)(n.li,{children:["\u8fd4\u56de ",(0,l.jsx)(n.code,{children:"[expect_num_bins, channels]"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\u5728\u4e3b\u5faa\u73af\u4e2d\uff0c\u4f60\u5bf9\u6bcf\u4e2a trial \u7684 0/1 \u8109\u51b2\u77e9\u9635\u8c03\u7528\u8be5\u51fd\u6570\u5e76\u6536\u96c6\u5230 ",(0,l.jsx)(n.code,{children:"X_list"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-5\u6253\u5305\u4e0e\u4fdd\u5b58",children:"Step 5\uff1a\u6253\u5305\u4e0e\u4fdd\u5b58"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5c06\u6240\u6709 trial \u7684 binned \u77e9\u9635\u5806\u53e0\u4e3a ",(0,l.jsx)(n.code,{children:"X_array = (num_trials, time_bins, num_units)"}),"\uff0c\u5c06\u6807\u7b7e\u5217\u8868\u8f6c\u4e3a ",(0,l.jsx)(n.code,{children:"y_array"}),"\uff1b"]}),"\n",(0,l.jsxs)(n.li,{children:["\u4ee5 ",(0,l.jsx)(n.code,{children:"np.save"})," \u5f62\u5f0f\u4fdd\u5b58\u5b57\u5178\uff1a"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'data_dict = {"spike": X_array, "label": y_array}\nnp.save("./allen_vc_npx/session_{ID}_dg8_{AREA}.npy", data_dict)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"6-\u8fd0\u884c\u65b9\u5f0f",children:"6. \u8fd0\u884c\u65b9\u5f0f"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u653e\u7f6e\u811a\u672c ",(0,l.jsx)(n.code,{children:"check_data.py"})," \u4e8e\u4efb\u610f\u76ee\u5f55\uff1b"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u6839\u636e\u9700\u8981\u4fee\u6539\u811a\u672c\u9876\u90e8\u201c\u53c2\u6570\u533a\u201d\uff08\u7f13\u5b58\u76ee\u5f55\u3001\u8111\u533a\u3001SNR \u9608\u503c\u3001bin \u6570\u91cf\u7b49\uff09\uff1b"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u8fd0\u884c\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"python data_process.py\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u811a\u672c\u4f1a\u904d\u5386\u4f1a\u8bdd\uff0c\u4ec5\u5904\u7406\u5305\u542b ",(0,l.jsx)(n.code,{children:"drifting_gratings"})," \u7684\u4f1a\u8bdd\uff0c\u5e76\u5728\u7f13\u5b58\u76ee\u5f55\u4e0b\u751f\u6210\u5bf9\u5e94\u7684 ",(0,l.jsx)(n.code,{children:".npy"})," \u6570\u636e\u6587\u4ef6\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"7-\u8f93\u51fa\u6570\u636e\u8bf4\u660e",children:"7. \u8f93\u51fa\u6570\u636e\u8bf4\u660e"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"session_{session_id}_dg8_{target_area}.npy"}),"\uff1a"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"spike"}),": ",(0,l.jsx)(n.code,{children:"int"})," \u578b\u6216 ",(0,l.jsx)(n.code,{children:"np.int8/np.int32"})," \u8ba1\u6570\uff0c\u5f62\u72b6 ",(0,l.jsx)(n.code,{children:"(N, T, C)"}),"\uff1b"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"label"}),": ",(0,l.jsx)(n.code,{children:"int"})," \u578b\uff0c\u53d6\u503c ",(0,l.jsx)(n.code,{children:"0-7"})," \u5bf9\u5e94 8 \u4e2a\u65b9\u5411\uff1b"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"8-\u5e38\u89c1\u95ee\u9898\u4e0e\u5efa\u8bae",children:"8. \u5e38\u89c1\u95ee\u9898\u4e0e\u5efa\u8bae"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsxs)(n.strong,{children:["\u627e\u4e0d\u5230 ",(0,l.jsx)(n.code,{children:"drifting_gratings"})]}),"\uff1a\u5e76\u975e\u6bcf\u4e2a\u4f1a\u8bdd\u90fd\u542b\u8be5\u523a\u6fc0\u7c7b\u578b\uff0c\u811a\u672c\u5df2\u5728\u7f3a\u5931\u65f6\u8df3\u8fc7\uff1b\u53ef\u8003\u8651\u652f\u6301 ",(0,l.jsx)(n.code,{children:"static_gratings"})," \u6216\u81ea\u7136\u5f71\u7247\u7b49\u523a\u6fc0\u7c7b\u578b\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u65f6\u95f4\u6b65\u4e0e bin \u5927\u5c0f"}),"\uff1a",(0,l.jsx)(n.code,{children:"expect_num_bins"})," \u8d8a\u5927\u65f6\u95f4\u5206\u8fa8\u7387\u8d8a\u9ad8\uff0c\u4f46\u8f93\u5165\u5f20\u91cf\u66f4\u5927\uff1b\u53ef\u4f9d\u636e\u4e0b\u6e38\u6a21\u578b/\u663e\u5b58\u8c03\u6574\u3002"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5355\u4f4d\u8d28\u91cf\u63a7\u5236"}),"\uff1a\u5f53\u524d\u4ec5\u4ee5 SNR \u2265 2 \u8fc7\u6ee4\uff1b\u53ef\u7ed3\u5408 ",(0,l.jsx)(n.code,{children:"firing_rate"}),"\u3001",(0,l.jsx)(n.code,{children:"ISI violations"})," \u7b49 AllenSDK \u9884\u8ba1\u7b97\u6307\u6807\u8fdb\u4e00\u6b65\u7b5b\u9009\u3002"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>c});var s=i(6540);const l={},r=s.createContext(l);function d(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);