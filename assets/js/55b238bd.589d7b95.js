"use strict";(self.webpackChunkhcihub_docs=self.webpackChunkhcihub_docs||[]).push([[9542],{2714:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"datasets/invasive/Reaching MC PMC","title":"8_Reaching MC PMC","description":"Dataset Overview","source":"@site/docs/datasets/invasive/8_Reaching MC PMC.md","sourceDirName":"datasets/invasive","slug":"/datasets/invasive/Reaching MC PMC","permalink":"/BCIJelly-site/docs/next/datasets/invasive/Reaching MC PMC","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/datasets/invasive/8_Reaching MC PMC.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"7_NPR M1","permalink":"/BCIJelly-site/docs/next/datasets/invasive/NPR M1"},"next":{"title":"9_Visual Neuropixel","permalink":"/BCIJelly-site/docs/next/datasets/invasive/Visual Neuropixel"}}');var r=n(4848),t=n(8453);const a={},l="8_Reaching MC PMC",d={},c=[{value:"Dataset Overview",id:"dataset-overview",level:2},{value:"Processing Goals",id:"processing-goals",level:2},{value:"Parameter Configuration",id:"parameter-configuration",level:2},{value:"Data Processing Steps",id:"data-processing-steps",level:2},{value:"1. Iterate Over NWB Files",id:"1-iterate-over-nwb-files",level:3},{value:"2. Open NWB File",id:"2-open-nwb-file",level:3},{value:"3. Read Trial Information",id:"3-read-trial-information",level:3},{value:"4. Read Spike Data",id:"4-read-spike-data",level:3},{value:"5. Trial Segmentation and Spike Matrix Construction",id:"5-trial-segmentation-and-spike-matrix-construction",level:3},{value:"6. Save Processed Data",id:"6-save-processed-data",level:3},{value:"Visualization Suggestions",id:"visualization-suggestions",level:2},{value:"Notes",id:"notes",level:2}];function o(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"8_reaching-mc-pmc",children:"8_Reaching MC PMC"})}),"\n",(0,r.jsx)(i.h1,{id:"long-term-recordings-of-motor-and-premotor-cortical-spiking-activity-during-reaching-in-monkeys",children:"Long-term Recordings of Motor and Premotor Cortical Spiking Activity During Reaching in Monkeys"}),"\n",(0,r.jsx)(i.h2,{id:"dataset-overview",children:"Dataset Overview"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Dataset Name"}),": Long-term recordings of motor and premotor cortical spiking activity during reaching in monkeys"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"DOI"}),": ",(0,r.jsx)(i.a,{href:"https://doi.org/10.48324/dandi.000688/0.250122.1735",children:"10.48324/dandi.000688/0.250122.1735"})]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Authors"}),": Perich, Matthew G.; Miller, Lee E.; Azabou, Mehdi; Dyer, Eva L."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Data Types"}),":","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Neural signals: Multi-channel recordings from M1 / PMd brain regions (192 channels), manually spike sorted or threshold crossings"}),"\n",(0,r.jsx)(i.li,{children:"Behavioral signals: Cursor position, velocity, and task-related metadata"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Experimental Tasks"}),": Center-Out (CO) task and continuous random target task"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Data Standard"}),": NWB (Neurodata Without Borders)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Sampling Rate"}),": 1000 Hz"]}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"processing-goals",children:"Processing Goals"}),"\n",(0,r.jsx)(i.p,{children:"Process the raw NWB data into trial-based samples suitable for neural decoding or regression tasks, including:"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"Segment spike data by trial;"}),"\n",(0,r.jsx)(i.li,{children:"Resample each trial to a fixed number of time bins (BINNED_LEN = 50);"}),"\n",(0,r.jsxs)(i.li,{children:["Construct spike matrices ",(0,r.jsx)(i.code,{children:"[Time, Channel]"})," for each trial;"]}),"\n",(0,r.jsx)(i.li,{children:"Convert each trial's target direction into 8 categorical labels;"}),"\n",(0,r.jsxs)(i.li,{children:["Save the processed data as ",(0,r.jsx)(i.code,{children:".npz"})," files with ",(0,r.jsx)(i.code,{children:"features"})," and ",(0,r.jsx)(i.code,{children:"labels"})," fields."]}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"parameter-configuration",children:"Parameter Configuration"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Parameter"}),(0,r.jsx)(i.th,{children:"Description"}),(0,r.jsx)(i.th,{children:"Example Value"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"FS"})}),(0,r.jsx)(i.td,{children:"Neural data sampling rate"}),(0,r.jsx)(i.td,{children:"1000 Hz"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"BINNED_LEN"})}),(0,r.jsx)(i.td,{children:"Number of time bins per trial after resampling"}),(0,r.jsx)(i.td,{children:"50"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"DATA_ROOT"})}),(0,r.jsx)(i.td,{children:"Path to raw NWB files"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"./data/sub-C/CO"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"SAVE_ROOT"})}),(0,r.jsx)(i.td,{children:"Path to save processed data"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"./out/sub-C/CO"})})]})]})]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"data-processing-steps",children:"Data Processing Steps"}),"\n",(0,r.jsx)(i.h3,{id:"1-iterate-over-nwb-files",children:"1. Iterate Over NWB Files"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Only process ",(0,r.jsx)(i.code,{children:".nwb"})," files;"]}),"\n",(0,r.jsxs)(i.li,{children:["Extract the file date ",(0,r.jsx)(i.code,{children:"YYYYMMDD"})," for saving purposes."]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"2-open-nwb-file",children:"2. Open NWB File"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:"with NWBHDF5IO(nwb_path, 'r') as io:\n    f = io.read()\n"})}),"\n",(0,r.jsx)(i.h3,{id:"3-read-trial-information",children:"3. Read Trial Information"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"results"}),": trial success indicator (",(0,r.jsx)(i.code,{children:"'R'"})," indicates successful trial)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"start_time"})," / ",(0,r.jsx)(i.code,{children:"stop_time"}),": trial start and end times"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"target_dir"}),": trial target direction"]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Filter successful trials and convert target directions into 8 categories:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:"tgt_dir_after = tgt_dir_after / np.pi * 4\ntgt_dir_after = np.round(tgt_dir_after).astype(np.int32)\n"})}),"\n",(0,r.jsx)(i.h3,{id:"4-read-spike-data",children:"4. Read Spike Data"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"spike_times"}),": spike timestamps for each channel (in seconds)"]}),"\n",(0,r.jsxs)(i.li,{children:["Convert to sample indices: ",(0,r.jsx)(i.code,{children:"spikes_idx = np.round(spike_times * FS)"})]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"5-trial-segmentation-and-spike-matrix-construction",children:"5. Trial Segmentation and Spike Matrix Construction"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["For each trial:","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Create a zero matrix ",(0,r.jsx)(i.code,{children:"[trial_len, n_channels]"}),";"]}),"\n",(0,r.jsx)(i.li,{children:"Mark spike times with 1s;"}),"\n",(0,r.jsxs)(i.li,{children:["Resample evenly to ",(0,r.jsx)(i.code,{children:"[BINNED_LEN, n_channels]"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"6-save-processed-data",children:"6. Save Processed Data"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Create directory: ",(0,r.jsx)(i.code,{children:"SAVE_ROOT/YYYYMMDD"})]}),"\n",(0,r.jsxs)(i.li,{children:["Save as ",(0,r.jsx)(i.code,{children:".npz"})," file:"]}),"\n"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:"np.savez(os.path.join(SAVE_ROOT, f'{date}.npz'), features=trials, labels=cly_trials)\n"})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"features"}),": list of ",(0,r.jsx)(i.code,{children:"[BINNED_LEN, n_channels]"})," matrices"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"labels"}),": categorical target direction for each trial ",(0,r.jsx)(i.code,{children:"[0, 7]"})]}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"visualization-suggestions",children:"Visualization Suggestions"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Spike raster plots (",(0,r.jsx)(i.code,{children:"[time, channel]"}),")"]}),"\n",(0,r.jsx)(i.li,{children:"Trial label distribution"}),"\n",(0,r.jsx)(i.li,{children:"Heatmaps of binned spike activity"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["Only successful trials are retained (",(0,r.jsx)(i.code,{children:"results == 'R'"}),");"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"BINNED_LEN"})," can be adjusted according to model requirements;"]}),"\n",(0,r.jsx)(i.li,{children:"Spike indices should be rounded and bounded to avoid overflow;"}),"\n",(0,r.jsx)(i.li,{children:"Target directions are converted to 8 integer categories for classification models."}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>l});var s=n(6540);const r={},t=s.createContext(r);function a(e){const i=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:i},e.children)}}}]);